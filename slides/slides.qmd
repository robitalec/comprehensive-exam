---
title: "Influence of habitat on resource availability during social foraging"
subtitle: "Ph.D. Oral Comprehensive Examination"
date: "2023-04-17"
author:
  - name: Alec L. Robitaille
    affiliations:
      - name: "Memorial University of Newfoundland and Labrador"
format:
  revealjs: 
    theme: [dark, custom.scss]
    hash-type: number
date-format: iso
---



## <!-- Question --> {.center} 


```{r}
#| echo: false
#| include: false
source('R/packages.R')
```

### In the context of frequency-dependent producer-scrounger dynamics, how would one's role affect access to available resources considering risks and conditions during habitat selection?

::: {.notes}
Read q  
Next slide, grouped terms
:::

## <!-- Question, color --> {.center} 

### <span style="color: #42727c">In the context of </span><span style="color: #9d7195">frequency-dependent producer-scrounger dynamics</span><span style="color: #42727c">, how would one's </span><span style="color: #9d7195">role</span><span style="color: #42727c"> affect </span><span style="color: #AD8F89">access</span><span style="color: #42727c"> to </span><span style="color: #AD8F89">available resources</span><span style="color: #42727c"> considering </span><span style="color: #959D71">risks and conditions</span><span style="color: #42727c"> during </span><span style="color: #959D71">habitat selection</span><span style="color: #42727c">?</span>

::: {.notes}
I've colored  
Starting with producer-scrounger  
Ending with habitat selection   
Meet in the middle, access and availability

The question focuses on what modifies an individual's access    
Good time to clarify how I'm defining access and availability

Availability is the amount of habitat available to an animal  
And accessibility is the subset of available habitat that can actually be reached by that animal  
Many factors contribute to the difference between availability and accessibility  
Assume access is to resources that are available

:::

## <!-- Flowchart --> {.center} 

```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#e1e1e1", style = filled, color = "#3f6f7a", fillcolor = "#3f6f7a", penwidth = 4]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources []
	Conditions []
	Risks []

    Roles []
	access_avail [label = "Availability\nand\naccess", shape = ellipse]
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```


::: {.notes}
I took these terms and built a graph showing relationships

We'll walk through this graph through the rest of the slides,
don't worry about taking it all in yet

As we'll see PS and HS don't have the same objectives or approaches
but they both tell us something about availability and accessibility of resources

There are some interesting ways of bringing them together
:::



## <!-- Producer-scrounger roles --> {.center} 

:::: {.columns}

::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources
	Conditions
	Risks

    Roles [color = "#9d7195", fontcolor = "#e1e1e1", fillcolor = "#9d7195"]
	ps_dyn [label = "Producer-scrounger\ndynamics", color = "#9d7195", fillcolor = "#9d7195", fontcolor = "#e1e1e1"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]
	access_avail [label = "Availability\nand\naccess", shape = ellipse]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::

::: {.column width="45%"}
<br>
<br>

Producers

Scroungers

(Opportunists)

:::

::::


::: {.notes}
Producer-scrounger dynamics are a social foraging model

Based in evolutionary game theory, considers how animals use different foraging strategies to maximize foraging intake

Two main strategies  
Producers independently search for forage patches and  
Scroungers monitor conspecifics to share or steal their discovered patches

Opportunitists are a third strategy sometimes considered  
Can play both strategies but less efficienctly than either pure strategy  
Ignored here

Role is the foraging strategy played by an individiual 
:::


## <!-- Producer-scrounger video --> 


{{< video https://www.youtube.com/embed/B1h1mDgSjOc width="100%" height="85%"  >}}


::: footer
Keynan, O., Ridley, A. R., & Lotem, A. (2015). Social foraging strategies and acquisition of novel foraging skills in cooperatively breeding Arabian babblers. Behavioral Ecology, 26(1), 207-214.

<br> 

Arabian babblers (*Turdoides squamiceps*)
:::


::: {.notes}
To develop some intuition, we'll watch a video of producer-scrounger dynamics in birds, specifically Arabian babblers

The experimental setup is a few pieces of styrofoam with small holes that are filled with seeds. Individuals land and decide to produce and scrounge. 

Some things to look out for are if an individual decides to search for forage independently (produce) or alternatively decides to join another bird to share their forage (scrounge)

Note individuals don't seem to be fixed using one strategy or the other

and individuals' strategies seem to change as the number of birds increases. 

This leads us into frequency dependence
:::


## <!-- Frequency, payoffs, penalties --> {.center} 

:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources
	Conditions
	Risks

    Roles 
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence", color = "#9d7195", fillcolor = "#9d7195", fontcolor = "#e1e1e1"]
	patch_penalties [label = "Patch penalties", color = "#9d7195", fillcolor = "#9d7195", fontcolor = "#e1e1e1"]
	patch_payoffs [label = "Patch payoffs", color = "#9d7195", fillcolor = "#9d7195", fontcolor = "#e1e1e1"]
	access_avail [label = "Availability\nand\naccess", shape = ellipse]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::

::: {.column width="45%"}
<br>

<br>

Frequency dependence

Payoffs

Penalties

:::

::::


::: {.notes}
Models of social foraging integrate the economic interdependence of individuals foraging together

For producer-scrounger dynamics, the benefits and costs of a foraging strategy depend on
the frequency of strategies being played in the group

Payoffs are amount of particular resource as well as predator dilution, thermal insulation Penalties, for example, competition, contests with conspecifics

A typical iterative model where individuals play a strategy at each time step like the Barnard and Sibly 1981 model:

Producer's find patches given some patch discovery rate and have sole access to a portion of the patch, a finder's share. Scroungers divide all discovered patches minus the finder's share equally 

Frequency dependence of these payoffs: a scrounger's payoff increases with number of producers since more patches are discovered. A producer's payoff decreases with number of scroungers as more of their discovered patches is shared or lost to scroungers. 

:::

::: footer
Barnard, C. J., & Sibly, R. M. (1981). Producers and scroungers: a general model and its application to captive flocks of house sparrows. Animal behaviour, 29(2), 543-550.
:::

<!-- 
examples of frequency dependence, payoffs, penalties

--> 

## <!-- Objective 1 --> {.center} 

:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources
	Conditions
	Risks

    Roles [color = "#9d7195", fillcolor = "#9d7195", fontcolor = "#e1e1e1"]
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]
	access_avail [label = "Availability\nand\naccess", shape = ellipse, fillcolor = "#AD8F89", color = "#AD8F89", fontcolor = "#e1e1e1"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::

::: {.column width="45%"}
<br>

### Objective 1: 

Access to resources

depending on role
:::

::::

::: {.notes}
First goal is to consider how access to resources depends on foraging role

Recall that accessible resources are a subset of available resources

We'll come back to availability later

:::

## <!-- Access - role --> {.center} 

:::: {.columns}
::: {.column width="40%"}
Producers

```{r producer_access}
#| echo: false
#| fig-width: 5
#| fig-height: 5
tar_load(landscape_long)

# Producer ----------------------------------------------------------------
DT_id <- CJ(id = c('A'), pr_id = c('C', 'D', 'E'), obs = seq.int(1))
DT_id[, c('x', 'y') := .(c(-1, 0.2, 1), c(1, -0.5, 0.4))]

DT_ed <- CJ(id = 'A', obs = seq.int(1), rdm = seq.int(10))

DT_pt <- CJ(id = 'A', obs = seq.int(1))
DT_pt[, c('x', 'y') := .(0, 0)]

DT_pt_rdm <- DT_ed[DT_pt, on = .(id, obs)]
DT_pt_rdm[, c('x_rdm', 'y_rdm') := .(x + rnorm(.N, sd = 0.5), y + rnorm(.N, sd = 0.5))]


# Scrounger -------------------------------------------------------------
DT_id <- CJ(id = c('A'), pr_id = c('C', 'D', 'E'), obs = seq.int(1))
DT_id[, c('x', 'y') := .(c(-1, 0.2, 1), c(1, -0.5, 0.4))]


DT_sc <- CJ(id = c('A'), obs = seq.int(1))
DT_sc[, c('x', 'y') := .(0, 0)]

mDTsc <- DT_sc[DT_id, on = 'id']


producer <- ggplot(landscape_long,
		aes(rescale(x, c(-1.2, 1.2)),
			rescale(y, c(-1.2, 1.2)))) +
	geom_tile(aes(fill = clumps), alpha = 0.6) +
	geom_point(aes(x_rdm, y_rdm), size = 2, data = DT_pt_rdm) +
	geom_point(aes(i.x, i.y), size = 5, shape = 15, data = mDTsc) +
	geom_segment(aes(x = x, y = y, xend = x_rdm, yend = y_rdm),
				 linewidth = 1, 
				 arrow = arrow(length = unit(0.1, 'inches')),
				 data = DT_pt_rdm,
				 color = 'grey40') +
	geom_point(aes(x, y), size = 5, data = DT_pt_rdm, shape = 15) +
	coord_equal() +
	guides(fill = 'none') +
	theme_void() + 
	theme(plot.background = element_rect(fill = "#134f5c",colour = "#134f5c"),
		  panel.background = element_rect(fill = "#134f5c",colour = "#134f5c")) +
	scale_fill_scico(palette = 'acton', begin = 0.5, end = 0.9)
producer
```
:::
 
::: {.column width="10%"}
:::
 
::: {.column width="40%"}
Scroungers

```{r scrounger_access}
#| echo: false
#| fig-width: 5
#| fig-height: 5
scrounger <- ggplot(landscape_long,
			 aes(rescale(x, c(-1.2, 1.2)),
			 		rescale(y, c(-1.2, 1.2)))) +
	geom_tile(aes(fill = clumps), alpha = 0.6) +
	coord_equal() +
	geom_point(aes(i.x, i.y), size = 5, shape = 15, data = mDTsc) +
	geom_segment(aes(x = x, y = y, xend = i.x, yend = i.y),
				 linewidth = 1, 
				 arrow = arrow(length = unit(0.1, 'inches')),
				 data = mDTsc,
			     color = 'grey40') +
	geom_point(aes(x, y), size = 5, data = mDTsc, shape = 17) +
	guides(color = 'none', fill = 'none') +
	theme_void() + 
	theme(plot.background = element_rect(fill = "#134f5c",colour = "#134f5c"),
		  panel.background = element_rect(fill = "#134f5c",colour = "#134f5c")) +
	scale_fill_scico(palette = 'acton', begin = 0.5, end = 0.9)
scrounger
```
:::

::::
 

::: {.notes}
Both panels have four individuals, three conspecifics and a focal individual in the middle

Left has producer focal individual  
access to resources is based only on limits of an individual's movement  

On the right, the focal individual is a scrounger, indicated by the triangle    
Access to resources depends on the presence and location of producers  
Scrounger can only access forage discovered by a producer
:::



## <!-- Habitat selection --> {.center} 


:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]
	Conditions [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]
	Risks [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]

    Roles []
	access_avail [label = "Availability\nand\naccess", shape = ellipse]
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::

::: {.column width="45%"}

<br> 

<br> 

Habitats = 

Resources + 

Risks +  

Conditions
:::

::::



::: {.notes}
However, we know that habitats are more complex than distributed patches of forage

Matthiopolous, Fieberg, Aarts (2023) define habitat as the sum of environmental variables categorized as resources, risks and conditions

We'll look at examples of each of these...
:::

::: footer
Matthiopoulos, J., Fieberg, J. R., & Aarts, G. (2023). Species-Habitat Associations: Spatial data, predictive models, and ecological insights.
:::


## <!-- Resources --> {.center} 

:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]
	Conditions []
	Risks []

    Roles []
	access_avail [label = "Availability\nand\naccess", shape = ellipse]
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::

::: {.column width="45%"}
```{r resources}
#| fig-height: 7
ggplot(data.frame(x = c(0, 3)), aes(x)) +
  stat_function(fun = exp, geom = 'line', linewidth = 3) + 
  theme_minimal(base_size = 30) + 
  labs(x = 'Resource', y = 'Expected effect on fitness') + 
  theme(axis.text.y = element_blank())
```

E.g. forage patch quality, or resting spaces

:::

::::


::: {.notes}
Resources are environmental variables that have a positive expected effect on fitness

Patch variables like quality, richness, density

or resting and denning spaces
:::


## <!-- Risks--> {.center} 


:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources []
	Conditions []
	Risks [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]

    Roles []
	access_avail [label = "Availability\nand\naccess", shape = ellipse]
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::


::: {.column width="45%"}
```{r risks}
#| fig-height: 7
ggplot(data.frame(x = c(0, 3)), aes(x)) +
  stat_function(fun = function(x) 1/exp(x), geom = 'line', linewidth = 3) + 
  theme_minimal(base_size = 30) + 
  labs(x = 'Risks', y = 'Expected effect on fitness') + 
  theme(axis.text.y = element_blank())
```

E.g. predation, anthropogenic

:::

::::

::: {.notes}
Risks are environmental variables that have a negative expected effect on fitness

Predation risk, disease, 

or anthropogenic disturbance or harvest
:::

## <!--Conditions--> {.center} 

:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources []
	Conditions [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]
	Risks []

    Roles []
	access_avail [label = "Availability\nand\naccess", shape = ellipse]
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::

::: {.column width="45%"}
```{r conditions}
#| fig-height: 7
ggplot(data.frame(x = c(-3, 3)), aes(x)) +
  stat_function(fun = function(x) dnorm(scale(x)), geom = 'line', linewidth = 3) + 
  theme_minimal(base_size = 30) + 
  labs(x = 'Conditions', y = 'Expected effect on fitness') + 
  theme(axis.text.y = element_blank())
```

E.g. temperature, humidity, salinity

:::

::::

::: {.notes}
Conditions are interesting in that their expected effect on fitness is bell shaped where when conditions are "regular" or "average" they have a neutral or positive expected effect
and when "extreme" they have negative expected effect on fitness

Examples include temperature, humidity, salinity

Matthiopolous, Fieberg and Aarts recommend a species-agnostic definition of habitat 

The center point and shape of this relationship is species specific
:::


## <!-- Objective 2 --> {.center} 

:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]
	Conditions [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]
	Risks [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]

    Roles []
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]
	access_avail [label = "Availability\nand\naccess", shape = ellipse, fillcolor = "#AD8F89", color = "#AD8F89", fontcolor = "#e1e1e1"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::


::: {.column width="45%"}
<br>

### Objective 2: 

Access to resources

modified* by

risks and conditions
:::

::::

::: footer
\* Dubois, F., & Giraldeau, L. A. (2005). Fighting for resources: the economics of defense and appropriation. Ecology, 86(1), 3-11.

:::

::: {.notes}
The second gaol was to determine how access to resources is modified by risks and conditions

Dubois and Giraldeau emphasized that what matters is an influence disproportionately affecting one foraging strategy, say an environmental risk that impacts producers more than scroungers

I reviewed ~250 papers in the producer-scrounger literature looking for environmental variables I could categorize as resources, risks and conditions. 

We'll look at the results in the following slides, and I've included some examples of other resources, risks and conditions that might be important to consider but weren't address in the literature indicated with a count of 0
:::

## <!-- Table 1 - Resources -->{.center}

:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]
	Conditions []
	Risks []

    Roles []
	access_avail [label = "Availability\nand\naccess", shape = ellipse, fillcolor = "#AD8F89", color = "#AD8F89", fontcolor = "#e1e1e1"]
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::

::: {.column width="45%"}

Resources

|                 |       |
|-----------------|-------|
| Patch quantity  | 13    |
| Patch quality	  | 8     |
| Resting spaces  | 0     |
| Nesting spaces  | 0     |

:::
::::

::: {.notes}
Only patch variables were considered in the producer-scrounger literature 

The variables are aggregated here, patch quantity included patch size, patch distribution

and patch quality included patch rishness and patch depletability

Some influences of resources on foraging strategy 

Scrounging is disadvantaged when forage patches are smaller, more easily monopolized

Scrounging is favored if patches are large or rich in quality, because there is still an abundance of resources remaining after the producer's share
:::



## <!-- Table 1 - Risks -->{.center}

:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources []
	Conditions []
	Risks [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]

    Roles []
	access_avail [label = "Availability\nand\naccess", shape = ellipse, fillcolor = "#AD8F89", color = "#AD8F89", fontcolor = "#e1e1e1"]
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::

::: {.column width="45%"}

Risks

|                           | 		|
|---------------------------|-------|
| Predation                 | 4*    |
| Perception of risk   	    | 3     |
| Competition		        | 1     |
| Anthropogenic 			| 0     |
| Insects			        | 0     |
| Disease                   | 0     |

:::
::::


::: footer
\* Bugnyar, T., and K. Kotrschal. (2002). “Scrounging Tactics in Free-Ranging Ravens, Corvus Corax.” Ethology, 108 (11), 993–1009.
:::

::: {.notes}
Main risks considered in the producer-scrounger literature were predation risk and perception of predation risk

Perception of predation risk was used as a proxy in empirical tests for predation risk, where the distance between a feeder and cover was manipulated to create a range of risk, or where bird's primary flight feathers were clipped

Only one empirical test of predation risk, where Bugnyar and Kotrschal observed ravens foraging either with wolves or wild boars. Ravens were more likely to scrounge when the predation risk was high.  

They defined producing as stealing from allospecifics and scrounging as stealing from conspecifics. These definitions don't directly relate to classic definitions of producing and scrounging. 
:::


## <!-- Table 1 - Conditions -->{.center}

:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection"]
	Resources []
	Conditions [color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]
	Risks []

    Roles []
	access_avail [label = "Availability\nand\naccess", shape = ellipse, fillcolor = "#AD8F89", color = "#AD8F89", fontcolor = "#e1e1e1"]
	ps_dyn [label = "Producer-scrounger\ndynamics"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::

::: {.column width="45%"}
Conditions

|             | 	  |
|-------------|-------|
| Temperature |     1 |
| Wind        |     0 |
| Pressure    |     0 |
| Snow depth  |     0 |
| Salinity    |     0 |
| Humidity    |     0 |

:::
::::

::: {.notes}
Only one empirical test that measured a condition, finding no influence of ambient air temperature on producer-scrounger dynamics. 
:::

## <!-- Objective 3 --> {.center} 

:::: {.columns}
::: {.column width="35%"}
```{dot}
//| fig-width: 3.5
digraph habitat_and_producer {
  bgcolor = transparent;
  rankdir = TB
	node [fontsize = 42, shape = box, fontname = Helvetica, fontcolor = "#9d9d9d", style = filled, color = "#325861", fillcolor = "#325861", penwidth = 6]
	edge [penwidth = 5, color = "#9d9d9d"] 
	Habitat [label = "Habitat\nselection", color = "#959D71", fillcolor = "#959D71", fontcolor = "#e1e1e1"]
	Resources []
	Conditions []
	Risks []

    Roles []
	ps_dyn [label = "Producer-scrounger\ndynamics", color = "#9d7195", fillcolor = "#9d7195", fontcolor = "#e1e1e1"]
	freq [label = "Frequency\ndependence"]
	patch_penalties [label = "Patch penalties"]
	patch_payoffs [label = "Patch payoffs"]
	access_avail [label = "Availability\nand\naccess", shape = ellipse, fillcolor = "#AD8F89", color = "#AD8F89", fontcolor = "#e1e1e1"]

	ps_dyn -> Roles -> freq -> {patch_penalties patch_payoffs}
	{patch_penalties patch_payoffs} -> access_avail
	access_avail -> {Resources Conditions Risks} [dir = back]
	{patch_penalties} ->  Risks [color = "#707070", dir = back]
	patch_payoffs -> Resources [color = "#707070", dir = back]
	{patch_payoffs patch_penalties} -> Conditions [color = "#707070", dir = back]
	{Resources Risks Conditions} -> Habitat [dir = back]
}
```
:::

::: {.column width="10%"}

:::


::: {.column width="45%"}
<br>

### Objective 3: 

Integrate

foraging strategy

into

availability* 
:::

::::


::: footer
\* Beyer, H. L., Haydon, D. T., Morales, J. M., Frair, J. L., Hebblewhite, M., Mitchell, M., & Matthiopoulos, J. (2010). The interpretation of habitat preference metrics under use–availability designs.  
Philosophical Transactions of the Royal Society B: Biological Sciences, 365(1550), 2245-2254.

:::

::: {.notes}
The third goal was to consider how foraging strategy might be integrated in the habitat selection concept of availability

My overall approach for the written portion of the comprehensive exam was to focus on the producer-scrounger literature, so I won't do a deep dive all the methods of characterizing availability in the habitat selection literature

Preferential use of a habitat is defined as the disproportionate use given availability

Beyer et al have shown that the definition of availability has huge implications on outcomes

We're going to use a small toy example, to consider how producers and scroungers might have different availability
:::


## <!-- Recall: Access - role --> {.center} 

:::: {.columns}
::: {.column width="40%"}
Producers

```{r recall_producer_access}
#| echo: false
#| fig-width: 5
#| fig-height: 5
producer
```
:::
 
::: {.column width="10%"}
:::
 
::: {.column width="40%"}
Scroungers

```{r recall_scrounger_access}
#| echo: false
#| fig-width: 5
#| fig-height: 5
scrounger
```
:::

::::

::: {.notes}
We'll reuse the example from above, where producers have access to available resources limited only by the distance and direction they move and scroungers have access to resources only made available to them by producers

We'll look at how availability can be characterized using distributions of two components of movement: step length and turn angle

Step length is the distance an animal moves from A-B

Turn angle is the direction an animal moves from A-B. It can be absolute, where the direction corresponds to N-S-E-W bearing, or relative, where the angle is calculated relative to previous step, as a difference. For example if an individual moved due North in the previous step, and due North again in the current step, the relative angle would be 0. 
:::



## <!-- Objective 3: Distributions step length--> {.center} 

:::: {.columns}
::: {.column width="40%"}

Producers
```{r producer_sl}
#| fig-width: 5
#| fig-height: 5
#| echo: false
prod_sl <- data.frame(x = rgamma(1e3, 3, 2)) |>
	ggplot(aes(x)) + geom_density(fill = 'darkgrey') + 
	labs(x = 'step length', y = 'density') + 
	theme_minimal(base_size = 22)
prod_sl
```
:::
 
::: {.column width="10%"}
:::
 
::: {.column width="40%"}
Scroungers
```{r scounger_sl}
#| fig-width: 5
#| fig-height: 5
#| echo: false
scr_sl <- data.frame(x = c(
	rnorm(1.3e2, 2.5, 0.1),
	rnorm(1.1e2, 3.2, 0.1),
	rnorm(0.8e2, 4, 0.1))) |>
	ggplot(aes(x)) + geom_density(fill = 'darkgrey') + 
	geom_label(data = data.frame(x = c(2.5, 3.2, 4), y = rep(0.87, 3), id = LETTERS[seq.int(3)]), aes(x, y, label = id), size  = 5) + 
 	labs(x = 'step length', y = 'density') + 
	lims(x = c(0, 5)) + 
	theme_minimal(base_size = 22) +
	theme(axis.text.y = element_blank())
scr_sl
```
:::

::::

::: {.notes}
The distribution of step lengths for a producer is what we might be expecting: high values of steps and values around 0 are less common, and we see a tapering off from the highest density around moderate values. We aren't concerned about the units here because what's interesting is how this availability differs for scroungers

Scroungers, if they are purely playing the scrounger behaviour, only have what producers make available for them. Therefore, the density is fixed around the distance to their producer conspecifics. 
:::


## <!-- Objective 3: Distributions turn angle --> {.center} 

:::: {.columns}
::: {.column width="40%"}

Producers
```{r producer_ta}
#| fig-width: 5
#| fig-height: 5
#| echo: false
ggplot(data.table(
	x = as.integer(rvonmises(1e5, circular(0), 1, control.circular=list(units="degrees"))))[, .N, x][, .(x, N, density = N / sum(N))][x < 360]) +
	geom_area(aes(x, density), size = 1, fill = 'black', alpha = 0.5) +
	coord_polar() +
	theme_minimal(base_size = 22) + 
	labs(x = 'turn angle', y = 'density') + 
	theme(axis.text.y = element_blank()) +
	theme(axis.text.y = element_blank())
```
:::
  
::: {.column width="10%"}
:::
 
::: {.column width="40%"}

Scroungers
```{r scrounger_ta}
#| fig-width: 5
#| fig-height: 5
#| echo: false
ggplot(data.table(
	x = as.integer(c(
		rvonmises(5e1, circular(0), 1, control.circular=list(units="degrees")),
		rnorm(0.4e5, rad(75), 0.2),
		rnorm(0.6e5, rad(170), 0.3),
		rnorm(0.3e5, rad(320), 0.2)
	)))[, .N, x][, .(x, N, density = N / sum(N))][x < 360]) +
	geom_area(aes(x, density), size = 1, fill = 'black', alpha = 0.5) +
	coord_polar() +
	labs(x = 'turn angle', y = 'density') + 
	theme_minimal(base_size = 22) +
	theme(axis.text.y = element_blank())
```
:::

::::

::: {.notes}
For turn angle, I'm assuming that animals were previously headed in a Northerly direction and we're looking at the bearing or absolute turn angle of their next step. 

Producers again show our expectation that an animal will continue in the direction they were previously moving in, or make moderate turns left and right, and that there is a low likelihood that they will make a U-turn or 180 degree movement.

Scroungers again only have what producers make available to them and therefore the density is fixed on directions towards producer conspecifics

Now, we are maybe getting a little tangled in availability and accessibility, so I wanted to bring it back to those definitions and propose a more realistic option

Availability is the amount of habitat available to an animal and accessibility is the subset of that availability, that represents if an animal can actually reach a point in their habitat

So these examples have been based on one strategy being played at a single point in time but animals are known change strategies in different contexts and this is the same for producer-scrounger dynamics. 

:::


##  <!-- Objective 3: Strategy switching --> {.center} 

Strategy switching*

:::: {.columns}
::: {.column width="40%"}

```{r switch_sl}
#| fig-width: 5
#| fig-height: 5
#| echo: false
data.frame(x = c(
	rgamma(1e3, 3, 2),
	rnorm(1e2, 2.5, 0.1),
	rnorm(1e2, 3.2, 0.1),
	rnorm(1e2, 4, 0.1))) |>
	ggplot(aes(x)) + geom_density(fill = 'darkgrey') + 
	geom_label(data = data.frame(x = c(2.5, 3.2, 4), y = rep(0.4, 3), id = LETTERS[seq.int(3)]), aes(x, y, label = id), size  = 5) + 
 	labs(x = 'step length', y = 'density') + 
	lims(x = c(0, 5)) + 
	theme_minimal(base_size = 22) +
	theme(axis.text.y = element_blank())
```
:::
  
::: {.column width="10%"}
:::
 
::: {.column width="40%"}

```{r switch_ta}
#| fig-width: 5
#| fig-height: 5
#| echo: false
ggplot(data.table(
	x = as.integer(c(
		rvonmises(5e5, circular(0), 1, control.circular=list(units="degrees")),
		rnorm(0.5e5, rad(75), 0.2),
		rnorm(0.5e5, rad(170), 0.3),
		rnorm(0.3e5, rad(320), 0.2)
	)))[, .N, x][, .(x, N, density = N / sum(N))][x < 360]) +
	geom_area(aes(x, density), size = 1, fill = 'black', alpha = 0.5) +
	coord_polar() +
	labs(x = 'turn angle', y = 'density') + 
	theme_minimal(base_size = 22) +
	theme(axis.text.y = element_blank())
```
:::

::::

::: footer
Morand-Ferron, J., Giraldeau, L. A., & Lefebvre, L. (2007). Wild Carib grackles play a producer–scrounger game. Behavioral Ecology, 18(5), 916-921.
:::

::: {.notes}
Individuals have been observed to switch strategies in producer-scrounger dynamics depending on the context.

I took the step length and turn angle distributions and biased them by the location of conspecifics. This now represents how an individual could consider switching strategies to follow a conspecific as a scrounger, or to independently forage as a producer. 

To calculate these for each movement step would require measuring the distance between the individual and its conspecifics, then biasing the availability distributions. I also assigned less weight to further neighbours because I assumed that individuals were more likely to scrounge from nearby neighbours.
:::


## <!-- Gaps and future directions --> {.left}

- Access depending on foraging strategy
	- Scrounger access depends on producers
- Risks and conditions influence on strategies
	- Few tests of risks and conditions on producer-scrounger dynamics
- Habitat selection availability integrating foraging strategy
	- Consider foraging role in defining availability 
- (bonus!) Causal inference in habitat selection


## Causal inference in habitat selection <!-- Bonus -->{.center}

![](../figures/into-prop-scrounger.png)


<!--- 

wave your hands

this is complex

cant ignore it

and its potential impact on habitat selection


solution
principled approach - use a DAG

consider how behavioural strategies influence availability and access
-->





<!-- TODO

lead into future directions / recommendation to study PS with different risks, conditions 


then 

habitat selection methods integration

-->

<!--
1. observations of ps dynamics either through focal or getting leader follower 
1. make sense of causal salad
1. habitat selection availability integrated foraging role


3 reasons to do a habitat selection analysis

distribution

predictions

inference


for inference
we cannot use the causal salad of all variables ranked by aic

-->



## Selected references {.small}
 
### Social foraging {.small}

Barnard, C. J., & Sibly, R. M. (1981). Producers and scroungers: a general model and its application to captive flocks of house sparrows. Animal behaviour, 29(2), 543-550.

Giraldeau, L. A., & Caraco, T. (2000). Social foraging theory. Princeton University Press.

Vickery, W.L., L.A. Giraldeau, J.J. Templeton, D.L. Kramer, and C.A. Chapman. (1991). “Producers, Scroungers, and Group Foraging.” The American Naturalist 137 (6), 847–63.

Bugnyar, T., and K. Kotrschal. (2002). “Scrounging Tactics in Free-Ranging Ravens, Corvus Corax.” Ethology, 108 (11), 993–1009.

<br>

### Habitat selection {.small}

Matthiopoulos, J., Fieberg, J. R., & Aarts, G. (2023). Species-Habitat Associations: Spatial data, predictive models, and ecological insights.

Northrup, J. M., Vander Wal, E., Bonar, M., Fieberg, J., Laforge, M. P., Leclerc, M., ... & Gerber, B. D. (2022). Conceptual and methodological advances in habitat‐selection modeling: guidelines for ecology and evolution. Ecological Applications, 32(1), e02470.

Beyer, H. L., Haydon, D. T., Morales, J. M., Frair, J. L., Hebblewhite, M., Mitchell, M., & Matthiopoulos, J. (2010). The interpretation of habitat preference metrics under use–availability designs. Philosophical Transactions of the Royal Society B: Biological Sciences, 365(1550), 2245-2254.

<br>

### Causal inference {.small}

Pearl, J., & Mackenzie, D. (2018). The book of why: the new science of cause and effect.

McElreath, R. (2020). Statistical rethinking: A Bayesian course with examples in R and Stan.

Arif, S., & MacNeil, M. A. (2022). Predictive models aren't for causal inference. Ecology Letters, 25(8), 1741-1745.

<br>

::: footer
Full reference list: https://robitalec.gitlab.io/comprehensive-exam/manuscript/references.html
:::


## Acknowledgements  {.small}
Louise Twells, friends and family in NL, QC, NS

Katrien Kingdon, Jack Hendrix, Jill Kusch, Brendan Carswell, Emily Monk, Emilie Dedeban, Michael Peers, Yasmine Majchrzak

Quinn Webber, Isabella Richmond, Ally Menzies, Juliana Baluffi-Fry

Eric Vander Wal, Carolyn Walsh, Julie Teichroeb, Shawn Leroux

![](20230304_180305.jpg){fig-align="center"}



## Software {.small}

- quarto
- Revealjs
- targets
- ggplot2
- NLMR
- data.table




## <!-- Full relationships --> {.center}

![](../figures/full-relationships.png)

## <!-- Group level --> {.center}

![](../figures/group-level.png)

## <!-- RRC examples --> {.center}

![](../figures/resources-risks-conditions.png)


## <!-- Table S2 - Approaches --> {.small}

```{r}
#| echo: false
targets::tar_read(n_by_type) |>
	gt()
```

## <!-- Table S2 - Class --> {.small}

```{r}
#| echo: false
targets::tar_read(n_by_class) |>
	gt()
```

## <!-- Table S2 - Species --> {.small}

```{r}
#| echo: false
targets::tar_read(n_by_species) |>
	rmarkdown::paged_table()
```